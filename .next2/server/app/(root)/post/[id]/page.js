(()=>{var e={};e.id=43,e.ids=[43],e.modules={738:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var a=t(60687),r=t(16189),n=t(85814),i=t.n(n),o=t(65748),l=t(32584),d=t(29523),c=t(89667),m=t(43210),x=t(67760),u=t(33872),p=t(54864),h=t(62016);function g({postId:e}){let{data:s,isLoading:t,isError:r}=(0,o.yv)(e),n=(0,p.d4)(e=>e.auth.isAuthenticated),[g,f]=(0,m.useState)(!1),j=(0,m.useMemo)(()=>{var e;return(e=s?.content||"")?e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/^(\s*)\* (.+)/gm,"$1â€¢ $2").replace(/^>\s*(.+)/gm,'<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-600 my-2">$1</blockquote>'):""},[s?.content]),v=s?.community?.slug||s?.community?._id||s?.community?.name;console.log("communityKey-------------------\x3e",s?.community);let{data:N}=(0,o.aC)({cursor:"1",limit:5,community:v,sortBy:"createdAt",sortType:"desc"},{skip:!v}),[b,y]=(0,m.useState)(""),{data:w,isLoading:C}=(0,o.WS)({postId:e,page:1,limit:10,sortBy:"createdAt",sortType:"desc"},{skip:!e}),[_,{isLoading:k}]=(0,o.bL)(),[P,{isLoading:A}]=(0,o.z2)(),q=async e=>{if(!n)return void f(!0);try{await _(e).unwrap()}catch(e){}},E=async()=>{if(!n)return void f(!0);let s=b.trim();if(s)try{await P({content:s,postId:e}).unwrap(),y("")}catch(e){}},[G,{isLoading:L}]=(0,o.qx)(),[$,z]=(0,m.useState)(!1),[M,K]=(0,m.useState)(0),S=async()=>{if(!L){if(!n)return void f(!0);try{let s=await G(e).unwrap();z(s.liked),K(e=>s.liked?e+1:Math.max(e-1,0))}catch(e){}}};return(console.log("relatedFeed-------------------\x3e",N),t)?(0,a.jsx)("main",{className:"container mx-auto max-w-3xl px-4 py-6",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-muted rounded w-2/3"}),(0,a.jsx)("div",{className:"h-64 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-24 bg-muted rounded"})]})}):r||!s?(0,a.jsx)("main",{className:"container mx-auto max-w-3xl px-4 py-6",children:(0,a.jsx)("p",{className:"text-destructive",children:"Failed to load post."})}):(0,a.jsxs)("main",{className:"container mx-auto max-w-3xl px-4 py-6",children:[(0,a.jsxs)("article",{className:"bg-card text-card-foreground rounded-lg border border-border shadow-sm",children:[(0,a.jsxs)("div",{className:"px-6 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsxs)(l.eu,{className:"h-10 w-10",children:[(0,a.jsx)(l.BK,{src:s?.owner?.avatar,alt:s?.owner?.fullName}),(0,a.jsx)(l.q5,{children:s?.owner?.fullName?.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-semibold",children:s?.owner?.fullName}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["@",s?.owner?.username]})]})]}),(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold leading-tight",children:s.title})]}),s.image&&(0,a.jsx)("div",{className:"px-6 pt-4",children:(0,a.jsx)("img",{src:s.image,alt:"Post image",className:"w-full rounded-lg object-cover max-h-[500px]"})}),(0,a.jsx)("div",{className:"px-6 py-6",children:(0,a.jsx)("div",{className:"prose prose-lg max-w-none leading-relaxed",dangerouslySetInnerHTML:{__html:j}})}),(0,a.jsx)("div",{className:"flex items-center justify-between px-6 pb-6 pt-0",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:S,disabled:L,className:$?"text-red-600":"text-muted-foreground",children:[(0,a.jsx)(x.A,{className:`h-5 w-5 ${$?"fill-current":""}`}),M>0&&(0,a.jsx)("span",{className:"ml-1 text-sm font-medium",children:M})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground text-sm",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:(s?.engagementMetrics?.comments||0)+(s?.localEngagement?.comments||0)})]})]})})]}),(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Comments"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(c.p,{placeholder:"Write a comment...",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&E()},onFocus:()=>{n||f(!0)}}),(0,a.jsx)(d.$,{onClick:E,disabled:A||!b.trim(),children:"Post"})]}),C?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-12 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-12 bg-muted rounded"})]}):(0,a.jsx)("div",{className:"space-y-4",children:w?.docs?.length?w.docs.map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsxs)(l.eu,{className:"h-8 w-8",children:[(0,a.jsx)(l.BK,{src:e?.owner?.avatar,alt:e?.owner?.fullName}),(0,a.jsx)(l.q5,{children:e?.owner?.fullName?.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e?.owner?.fullName}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["@",e?.owner?.username]})]}),(0,a.jsx)("div",{className:"text-sm mt-1",children:e.content}),(0,a.jsx)("div",{className:"flex items-center gap-3 mt-2",children:(0,a.jsxs)(d.$,{variant:"ghost",size:"sm",onClick:()=>q(e._id),disabled:k,className:e.isLoved?"text-red-600":"text-muted-foreground",children:[(0,a.jsx)(x.A,{className:`h-4 w-4 ${e.isLoved?"fill-current":""}`}),(0,a.jsx)("span",{className:"ml-1 text-xs",children:e.likes||e.lovesCount||0})]})})]})]},e._id)):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No comments yet."})})]}),N?.docs?.length?(0,a.jsxs)("section",{className:"mt-8",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Related posts"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:N.docs.filter(e=>e._id!==s._id).map(e=>(0,a.jsx)(i(),{href:`/post/${e._id}`,className:"group",children:(0,a.jsx)("div",{className:"bg-card rounded-lg border border-border hover:border-accent transition-colors p-4 h-full",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[e.image?(0,a.jsx)("img",{src:e.image,alt:"thumb",className:"w-16 h-16 object-cover rounded"}):null,(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(l.eu,{className:"h-6 w-6",children:[(0,a.jsx)(l.BK,{src:e?.owner?.avatar,alt:e?.owner?.fullName}),(0,a.jsx)(l.q5,{children:e?.owner?.fullName?.charAt(0)})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-xs text-muted-foreground truncate",children:[(0,a.jsx)("span",{className:"truncate max-w-[140px]",children:e?.owner?.fullName}),(0,a.jsxs)("span",{className:"truncate text-xs",children:["@",e?.owner?.username]})]})]}),(0,a.jsx)(i(),{href:`/post/${e._id}`,children:(0,a.jsx)("h3",{className:"font-medium line-clamp-2 group-hover:text-primary",children:e.title})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:(e.content||"").slice(0,120)})]})]})})},e._id))})]}):null,(0,a.jsx)(h.W,{open:g,onOpenChange:f,description:"Please log in to interact with posts."})]})}function f(){let e=(0,r.useParams)(),s=e?.id||"";return(0,a.jsx)(g,{postId:s})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8847:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"G:\\\\shishir vai\\\\EarnCoreCommunity\\\\client\\\\src\\\\app\\\\(root)\\\\post\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\app\\(root)\\post\\[id]\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21148:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=t(65239),r=t(48088),n=t(88170),i=t.n(n),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d={children:["",{children:["(root)",{children:["post",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8847)),"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\app\\(root)\\post\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,74999)),"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["G:\\shishir vai\\EarnCoreCommunity\\client\\src\\app\\(root)\\post\\[id]\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(root)/post/[id]/page",pathname:"/post/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},23771:(e,s,t)=>{Promise.resolve().then(t.bind(t,8847))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33872:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},33873:e=>{"use strict";e.exports=require("path")},60563:(e,s,t)=>{Promise.resolve().then(t.bind(t,738))},62016:(e,s,t)=>{"use strict";t.d(s,{W:()=>l});var a=t(60687),r=t(85814),n=t.n(r),i=t(63503),o=t(29523);function l({open:e,onOpenChange:s,title:t="Login Required",description:r="You need to be logged in to perform this action."}){return(0,a.jsx)(i.lG,{open:e,onOpenChange:s,children:(0,a.jsxs)(i.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(i.c7,{children:[(0,a.jsx)(i.L3,{children:t}),(0,a.jsx)(i.rr,{children:r})]}),(0,a.jsxs)(i.Es,{className:"flex flex-col sm:flex-row sm:justify-end gap-2",children:[(0,a.jsx)(o.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(o.$,{asChild:!0,children:(0,a.jsx)(n(),{href:"/login",children:"Go to Login"})})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>c,Es:()=>x,L3:()=>u,c7:()=>m,lG:()=>o,rr:()=>p});var a=t(60687);t(43210);var r=t(26134),n=t(11860),i=t(4780);function o({...e}){return(0,a.jsx)(r.bL,{"data-slot":"dialog",...e})}function l({...e}){return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...e})}function d({className:e,...s}){return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function c({className:e,children:s,showCloseButton:t=!0,...o}){return(0,a.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[s,t&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,i.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function x({className:e,...s}){return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,i.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function u({className:e,...s}){return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,i.cn)("text-lg leading-none font-semibold",e),...s})}function p({className:e,...s}){return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,i.cn)("text-muted-foreground text-sm",e),...s})}},67760:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},79551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[447,457,173,217,533,175,743,487],()=>t(21148));module.exports=a})();