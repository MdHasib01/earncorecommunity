"use strict";exports.id=42,exports.ids=[42],exports.modules={18574:(e,s,a)=>{a.d(s,{R:()=>z});var t=a(60687),l=a(43210),r=a(78201),n=a(93508),c=a(23026),i=a(93661),d=a(81620),o=a(67760),x=a(33872),m=a(29523),h=a(32584),u=a(10022),f=a(41312),p=a(40228),j=a(63503),g=a(85726),N=a(65748),v=a(16189);function w({username:e,open:s,onOpenChange:a}){let l=(0,v.useRouter)(),{data:n,isLoading:c}=(0,N.M7)(e,{skip:!s});return(0,t.jsx)(j.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(j.Cf,{className:"sm:max-w-md",children:[(0,t.jsx)(j.c7,{children:(0,t.jsx)(j.L3,{children:"Profile"})}),c?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)(g.E,{className:"h-16 w-16 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.E,{className:"h-5 w-32"}),(0,t.jsx)(g.E,{className:"h-4 w-24"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(g.E,{className:"h-4 w-full"}),(0,t.jsx)(g.E,{className:"h-4 w-3/4"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(g.E,{className:"h-16 w-full"}),(0,t.jsx)(g.E,{className:"h-16 w-full"}),(0,t.jsx)(g.E,{className:"h-16 w-full"})]})]}):n?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsxs)(h.eu,{className:"h-16 w-16 ",children:[(0,t.jsx)(h.BK,{className:"object-cover",src:n?.avatar,alt:n?.fullName}),(0,t.jsx)(h.q5,{className:"text-lg",children:n?.fullName?.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("h3",{className:"text-lg font-bold text-foreground",children:n.fullName})}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["@",n.username]}),(0,t.jsx)(m.$,{size:"sm",className:"w-full",onClick:()=>{n&&(a(!1),l.push(`/profile/${n._id}`))},children:"View Profile"})]})]}),n.bio&&(0,t.jsx)("p",{className:"text-foreground",children:n.bio}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(u.A,{className:"h-5 w-5 text-muted-foreground mb-1"}),(0,t.jsx)("span",{className:"text-lg font-bold text-foreground",children:n.postsCount||0})]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Posts"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 text-muted-foreground mb-1"}),(0,t.jsx)("span",{className:"text-lg font-bold text-foreground",children:n.followersCount||0})]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Followers"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(f.A,{className:"h-5 w-5 text-muted-foreground mb-1"}),(0,t.jsx)("span",{className:"text-lg font-bold text-foreground",children:n.followingCount||0})]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Following"})]})]}),n.createdAt&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Joined"," ",(0,r.m)(new Date(n.createdAt),{addSuffix:!0})]})]})]}):null]})})}var b=a(63417),y=a(76974),k=a(4780),C=a(54864),A=a(21342),$=a(62016),E=a(60780);function z({post:e}){var s;let[a,u]=(0,l.useState)(!1),[f,p]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[v,z]=(0,l.useState)(()=>!!e.isLoved),[_,S]=(0,l.useState)((e.engagementMetrics?.likes||0)+(e.localEngagement?.likes||0)),[L,R]=(0,l.useState)(!1),M=(0,C.wA)(),F=(0,C.d4)(e=>e.auth.user),q=(0,C.d4)(e=>e.auth.isAuthenticated);(0,C.d4)(e=>e.likes.likedPostIds);let B=F?._id===e.owner._id,[P,{isLoading:I}]=(0,N.qx)(),[O,{isLoading:D}]=(0,N.nm)(),[T,{isLoading:K}]=(0,N.Me)(),{data:G}=(0,N.rV)(e.owner._id,{skip:B||!F}),W=(0,l.useCallback)(()=>!q&&(R(!0),!0),[q]),V=async()=>{if(!(I||W()))try{let s=await P(e._id).unwrap();z(s.liked),S(e=>s.liked?e+1:Math.max(e-1,0)),M((0,E.BO)({postId:e._id,liked:s.liked,post:e}))}catch(e){console.error("Failed to toggle like:",e)}},Y=async()=>{if(!(K||B||W()))try{await T(e.owner._id).unwrap()}catch(e){console.error("Failed to toggle follow:",e)}},H=()=>{g(!0)},Z=async()=>{let s=`${window.location.origin}/post/${e._id}`;if(navigator.share)try{await navigator.share({title:e.title,text:e.content.substring(0,100)+"...",url:s})}catch(e){console.error("Error sharing:",e)}else try{await navigator.clipboard.writeText(s)}catch(e){console.error("Failed to copy to clipboard:",e)}},J=e.content&&e.content.length>300;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("article",{className:"bg-card rounded-lg border border-border hover:border-accent transition-colors duration-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 pb-4",children:[(0,t.jsxs)("button",{onClick:()=>{u(!0)},className:"flex items-center space-x-3 hover:bg-accent/50 rounded-lg p-2 -m-2 transition-colors duration-200 cursor-pointer",children:[(0,t.jsxs)(h.eu,{className:"h-10 w-10",children:[(0,t.jsx)(h.BK,{className:"object-cover",src:e?.owner?.avatar,alt:e?.owner?.fullName}),(0,t.jsx)(h.q5,{children:e?.owner?.fullName?.charAt(0)})]}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)("span",{className:"font-semibold text-foreground",children:e?.owner?.fullName})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 space-x-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{className:"text-xs font-semibold",children:["@",e?.owner?.username]}),(0,t.jsx)("span",{className:"text-xs ",children:(0,r.m)(new Date(e.createdAt),{addSuffix:!0})})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[!B&&F&&(0,t.jsx)(m.$,{variant:"ghost",size:"sm",onClick:Y,disabled:K,className:(0,k.cn)("h-8 px-3",G?.isFollowing?"text-primary hover:text-primary/80":"text-muted-foreground hover:text-foreground"),children:G?.isFollowing?(0,t.jsx)(n.A,{className:"h-4 w-4"}):(0,t.jsx)(c.A,{className:"h-4 w-4"})}),(0,t.jsxs)(A.rI,{children:[(0,t.jsx)(A.ty,{asChild:!0,children:(0,t.jsx)(m.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-muted-foreground",children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})}),(0,t.jsx)(A.SQ,{align:"end",children:(0,t.jsxs)(A._2,{onClick:Z,children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Share"]})})]})]})]}),(0,t.jsxs)("div",{className:"px-4 pb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-3 leading-tight",children:e.title}),(0,t.jsxs)("div",{className:"prose wrap-break-word leading-relaxed",children:[(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:(s=((e,s=300)=>e.length<=s?e:e.substring(0,s)+"...")(e.content))?s.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/^(\s*)\* (.+)/gm,"$1• $2").replace(/^>\s*(.+)/gm,'<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-600 my-2">$1</blockquote>'):""}}),J&&(0,t.jsx)("button",{onClick:H,className:"text-primary hover:text-primary/80 font-medium mt-2 inline-block",children:"Read more"})]})]}),e.image&&(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsx)("img",{src:e.image,alt:"Post image",className:"w-full rounded-lg object-cover max-h-96 cursor-pointer",onClick:H})}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 pt-4 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)(m.$,{variant:"ghost",size:"sm",onClick:V,disabled:I,className:(0,k.cn)("flex items-center space-x-1 hover:bg-red-50 dark:hover:bg-red-950/20",v?"text-red-600 dark:text-red-400":"text-muted-foreground"),children:[(0,t.jsx)(o.A,{className:(0,k.cn)("h-5 w-5",v&&"fill-current text-red-600")}),_>0&&(0,t.jsx)("span",{className:"text-sm font-medium",children:_})]}),(0,t.jsxs)(m.$,{variant:"ghost",size:"sm",onClick:()=>{p(!0)},className:"flex items-center space-x-1 text-muted-foreground hover:bg-blue-50 dark:hover:bg-blue-950/20 hover:text-blue-600 dark:hover:text-blue-400",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),e.engagementMetrics?.comments+e.localEngagement.comments>0&&(0,t.jsx)("span",{className:"text-sm font-medium",children:e.engagementMetrics.comments+e.localEngagement.comments})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[e?.lovedBy&&e.lovedBy.length>0&&(0,t.jsx)("div",{className:"flex -space-x-1",children:e.lovedBy.slice(0,3).map((e,s)=>(0,t.jsxs)(h.eu,{className:"h-6 w-6 border-2 border-card",children:[(0,t.jsx)(h.BK,{src:e?.avatar,alt:e?.fullName}),(0,t.jsx)(h.q5,{className:"text-xs",children:e?.fullName?.charAt(0)})]},e?._id||s))}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:[_," loves"]}),e.engagementMetrics?.comments+e.localEngagement?.comments>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.engagementMetrics.comments+e.localEngagement.comments," ","comments"]})]})]})]})]})]}),(0,t.jsx)(w,{username:e?.owner?.username,open:a,onOpenChange:u}),(0,t.jsx)(b.C,{postId:e?._id,open:f,onOpenChange:p,onRequireAuth:()=>R(!0),isAuthenticated:q}),(0,t.jsx)(y.K,{post:e,open:j,onOpenChange:g}),(0,t.jsx)($.W,{open:L,onOpenChange:R,description:"Please log in to interact with posts."})]})}},34729:(e,s,a)=>{a.d(s,{T:()=>n});var t=a(60687),l=a(43210),r=a(4780);let n=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));n.displayName="Textarea"},42692:(e,s,a)=>{a.d(s,{F:()=>c});var t=a(60687),l=a(43210),r=a(68123),n=a(4780);let c=l.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsxs)(r.bL,{ref:l,className:(0,n.cn)("relative overflow-hidden",e),...a,children:[(0,t.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,t.jsx)(i,{}),(0,t.jsx)(r.OK,{})]}));c.displayName=r.bL.displayName;let i=l.forwardRef(({className:e,orientation:s="vertical",...a},l)=>(0,t.jsx)(r.VM,{ref:l,orientation:s,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,t.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})}));i.displayName=r.VM.displayName},44493:(e,s,a)=>{a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>i,Zp:()=>n,aR:()=>c});var t=a(60687),l=a(43210),r=a(4780);let n=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));n.displayName="Card";let c=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...s}));c.displayName="CardHeader";let i=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let d=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",l.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},62016:(e,s,a)=>{a.d(s,{W:()=>i});var t=a(60687),l=a(85814),r=a.n(l),n=a(63503),c=a(29523);function i({open:e,onOpenChange:s,title:a="Login Required",description:l="You need to be logged in to perform this action."}){return(0,t.jsx)(n.lG,{open:e,onOpenChange:s,children:(0,t.jsxs)(n.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(n.c7,{children:[(0,t.jsx)(n.L3,{children:a}),(0,t.jsx)(n.rr,{children:l})]}),(0,t.jsxs)(n.Es,{className:"flex flex-col sm:flex-row sm:justify-end gap-2",children:[(0,t.jsx)(c.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsx)(c.$,{asChild:!0,children:(0,t.jsx)(r(),{href:"/login",children:"Go to Login"})})]})]})})}},63417:(e,s,a)=>{a.d(s,{C:()=>C});var t=a(60687),l=a(43210),r=a(72542),n=a(93661),c=a(67760),i=a(33872),d=a(3589),o=a(78272),x=a(60020),m=a(27900),h=a(23668),u=a(32584),f=a(29523),p=a(34729),j=a(85726),g=a(42692),N=a(65748),v=a(4780),w=a(30036),b=a(21342);let y=(0,w.default)(async()=>{},{loadableGenerated:{modules:["components\\feed\\comments-drawer.tsx -> emoji-picker-react"]},ssr:!1});function k({comment:e,postId:s,isReply:a=!1,onRequireAuth:x,isAuthenticated:m}){let[h,g]=(0,l.useState)(!1),[w,y]=(0,l.useState)(!1),[C,A]=(0,l.useState)(""),[$,E]=(0,l.useState)(e.isLoved),[z,_]=(0,l.useState)(e.likes||e.lovesCount||0),[S]=(0,N.bL)(),[L]=(0,N.z2)(),{data:R,isLoading:M}=(0,N.N0)({commentId:e._id},{skip:!h||a}),F=async()=>{if(!m)return void x?.();try{let s=await S(e._id).unwrap();E(s.liked),_(e=>s.liked?e+1:Math.max(e-1,0))}catch(e){console.error("Failed to toggle comment like:",e)}},q=async()=>{if(!m)return void x?.();if(C.trim())try{await L({content:C,postId:s,parentCommentId:e._id}).unwrap(),A(""),y(!1)}catch(e){console.error("Failed to add reply:",e)}};return(0,t.jsxs)("div",{className:(0,v.cn)("space-y-3",a&&"ml-8"),children:[(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(u.eu,{className:"h-8 w-8 flex-shrink-0",children:[(0,t.jsx)(u.BK,{className:"object-cover",src:e.owner.avatar,alt:e.owner.fullName}),(0,t.jsx)(u.q5,{className:"text-xs",children:e.owner.fullName?.charAt(0)})]}),(0,t.jsxs)("div",{className:"flex-1  space-y-2",children:[(0,t.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,t.jsxs)("div",{className:"flex md:items-center justify-between mb-1",children:[(0,t.jsxs)("div",{className:"flex  md:items-center space-x-2",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:gap-2",children:[(0,t.jsx)("span",{className:"font-semibold text-sm text-foreground",children:e.owner.fullName}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["@",e.owner.username]})]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:function(e){let s=new Date,a=e.getFullYear()===s.getFullYear();return(0,r.GP)(e,a?"MMM d":"MMM d, yyyy")}(new Date(e.createdAt))}),e.isEdited&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"(edited)"})]}),(0,t.jsxs)(b.rI,{children:[(0,t.jsx)(b.ty,{asChild:!0,children:(0,t.jsx)(f.$,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,t.jsx)(n.A,{className:"h-3 w-3"})})}),(0,t.jsxs)(b.SQ,{align:"end",children:[(0,t.jsx)(b._2,{children:"Report"}),(0,t.jsx)(b._2,{children:"Copy link"})]})]})]}),(0,t.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:e.content})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4 px-3",children:[(0,t.jsxs)(f.$,{variant:"ghost",size:"sm",onClick:F,className:(0,v.cn)("h-6 px-2 text-xs hover:bg-red-50 dark:hover:bg-red-950/20",$?"text-red-600 dark:text-red-400":"text-muted-foreground"),children:[(0,t.jsx)(c.A,{className:(0,v.cn)("h-3 w-3 mr-1",$&&"fill-current")}),z>0&&z]}),!a&&(0,t.jsxs)(f.$,{variant:"ghost",size:"sm",onClick:()=>{if(!m)return void x?.();y(!w)},className:"h-6 px-2 text-xs text-muted-foreground hover:bg-blue-50 dark:hover:bg-blue-950/20 hover:text-blue-600",children:[(0,t.jsx)(i.A,{className:"h-3 w-3 mr-1"}),"Reply"]}),!a&&e?.replyCount&&e.replyCount>0&&(0,t.jsxs)(f.$,{variant:"ghost",size:"sm",onClick:()=>g(!h),className:"h-6 px-2 text-xs text-muted-foreground",children:[h?(0,t.jsx)(d.A,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(o.A,{className:"h-3 w-3 mr-1"}),e.replyCount," ",1===e.replyCount?"reply":"replies"]})]}),w&&(0,t.jsxs)("div",{className:"space-y-2 px-3",children:[(0,t.jsx)(p.T,{placeholder:"Write a reply...",value:C,onChange:e=>A(e.target.value),className:"resize-none text-sm",rows:2}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>{y(!1),A("")},children:"Cancel"}),(0,t.jsx)(f.$,{size:"sm",onClick:q,disabled:!C.trim(),children:"Reply"})]})]})]})]}),h&&!a&&(0,t.jsx)("div",{className:"space-y-3",children:M?(0,t.jsx)("div",{className:"ml-8 space-y-3",children:Array.from({length:2}).map((e,s)=>(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(j.E,{className:"h-6 w-6 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(j.E,{className:"h-4 w-24"}),(0,t.jsx)(j.E,{className:"h-12 w-full"})]})]},s))}):R?.docs?.map(e=>(0,t.jsx)(k,{comment:e,postId:s,isReply:!0,onRequireAuth:x,isAuthenticated:m},e._id))})]})}function C({postId:e,open:s,onOpenChange:a,onRequireAuth:r,isAuthenticated:n=!1}){let[c,d]=(0,l.useState)(""),[o,u]=(0,l.useState)(!1),[v,w]=(0,l.useState)(1),{data:b,isLoading:C}=(0,N.WS)({postId:e,page:v,limit:10},{skip:!s}),[A,{isLoading:$}]=(0,N.z2)(),E=async()=>{if(!n)return void r?.();if(c.trim())try{await A({postId:e,content:c}).unwrap(),d("")}catch(e){console.error("Failed to add comment:",e)}};return(0,t.jsx)(h._s,{open:s,onOpenChange:a,children:(0,t.jsxs)(h.zj,{className:"h-[85vh]",children:[(0,t.jsx)(h.BE,{children:(0,t.jsxs)(h.gk,{children:["Comments ",b?.totalDocs?`(${b.totalDocs})`:""]})}),(0,t.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,t.jsx)(g.F,{className:"flex-1 px-6",children:C?(0,t.jsx)("div",{className:"space-y-4",children:Array.from({length:5}).map((e,s)=>(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsx)(j.E,{className:"h-8 w-8 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,t.jsx)(j.E,{className:"h-4 w-24"}),(0,t.jsx)(j.E,{className:"h-16 w-full"}),(0,t.jsx)(j.E,{className:"h-3 w-16"})]})]},s))}):(0,t.jsxs)("div",{className:"space-y-6 pb-4",children:[b?.docs?.map(s=>(0,t.jsx)(k,{comment:s,postId:e,onRequireAuth:r,isAuthenticated:n},s._id)),b?.totalPages&&v<b.totalPages&&(0,t.jsx)("div",{className:"text-center py-4",children:(0,t.jsxs)(f.$,{variant:"outline",onClick:()=>{b?.totalPages&&v<b.totalPages&&w(e=>e+1)},className:"w-full",children:["Load more comments (",b.totalDocs-10*v," ","remaining)"]})}),b?.docs?.length===0&&(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(i.A,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No comments yet. Be the first to comment!"})]})]})}),(0,t.jsx)("div",{className:"border-t border-border p-4 space-y-3",children:(0,t.jsxs)("div",{className:"relative",children:[o&&(0,t.jsx)("div",{className:"absolute bottom-full  mb-2 z-50",children:(0,t.jsx)(y,{onEmojiClick:e=>{d(s=>s+e.emoji),u(!1)},width:300,height:400})}),(0,t.jsx)(p.T,{placeholder:"Write a comment...",value:c,onChange:e=>d(e.target.value),className:"resize-none pr-20",rows:3}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex items-center space-x-1",children:[(0,t.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>u(!o),className:"h-8 w-8 p-0",children:(0,t.jsx)(x.A,{className:"h-4 w-4"})}),(0,t.jsx)(f.$,{onClick:E,disabled:!c.trim()||$,size:"sm",className:"h-8 w-8 p-0",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]})]})})]})]})})}},63503:(e,s,a)=>{a.d(s,{Cf:()=>o,Es:()=>m,L3:()=>h,c7:()=>x,lG:()=>c,rr:()=>u});var t=a(60687);a(43210);var l=a(26134),r=a(11860),n=a(4780);function c({...e}){return(0,t.jsx)(l.bL,{"data-slot":"dialog",...e})}function i({...e}){return(0,t.jsx)(l.ZL,{"data-slot":"dialog-portal",...e})}function d({className:e,...s}){return(0,t.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function o({className:e,children:s,showCloseButton:a=!0,...c}){return(0,t.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...c,children:[s,a&&(0,t.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function x({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function m({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function h({className:e,...s}){return(0,t.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",e),...s})}function u({className:e,...s}){return(0,t.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",e),...s})}},76974:(e,s,a)=>{a.d(s,{K:()=>i});var t=a(60687),l=a(78201),r=a(63503),n=a(32584),c=a(42692);function i({post:e,open:s,onOpenChange:a}){var i;return(0,t.jsx)(r.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(r.Cf,{className:"max-w-5xl w-[95vw] max-h-[90vh] p-0 overflow-hidden",children:[(0,t.jsx)(r.c7,{className:"p-6 pb-4",children:(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"h-10 w-10",children:[(0,t.jsx)(n.BK,{className:"object-cover",src:e?.owner?.avatar,alt:e?.owner?.fullName}),(0,t.jsx)(n.q5,{children:e?.owner?.fullName?.charAt(0)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center space-x-2",children:(0,t.jsx)(r.L3,{className:"text-lg font-semibold",children:e?.owner?.fullName})}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["@",e?.owner?.username]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:(0,l.m)(new Date(e.createdAt),{addSuffix:!0})})]})]})]})})}),(0,t.jsx)(c.F,{className:"flex-1 px-6 max-h-[calc(90vh-120px)]",children:(0,t.jsxs)("div",{className:"pb-6",children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground mb-6 leading-tight",children:e.title}),e.image&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("img",{src:e.image,alt:"Post image",className:"w-full rounded-lg object-cover max-h-[400px] md:max-h-[500px]"})}),(0,t.jsx)("div",{className:"prose prose-lg max-w-none leading-relaxed text-foreground",children:(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:(i=e.content)?i.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>").replace(/^(\s*)\* (.+)/gm,"$1• $2").replace(/^>\s*(.+)/gm,'<blockquote class="border-l-4 border-gray-300 pl-4 italic text-gray-600 my-2">$1</blockquote>'):""}})})]})})]})})}}};