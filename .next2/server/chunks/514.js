"use strict";exports.id=514,exports.ids=[514],exports.modules={13732:(e,s,a)=>{a.d(s,{InfiniteFeed:()=>f});var t=a(60687),l=a(43210),r=a(37472),n=a(18574),i=a(65748),o=a(43125),c=a(93613),d=a(78122),m=a(29523),u=a(44493),h=a(85726);function x(){return(0,t.jsxs)("div",{className:"bg-card rounded-lg border border-border p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(h.E,{className:"h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(h.E,{className:"h-4 w-32"}),(0,t.jsx)(h.E,{className:"h-3 w-24"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(h.E,{className:"h-8 w-8 rounded"}),(0,t.jsx)(h.E,{className:"h-8 w-8 rounded"}),(0,t.jsx)(h.E,{className:"h-8 w-8 rounded"})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(h.E,{className:"h-6 w-3/4"}),(0,t.jsx)(h.E,{className:"h-4 w-full"}),(0,t.jsx)(h.E,{className:"h-4 w-full"}),(0,t.jsx)(h.E,{className:"h-4 w-2/3"})]}),(0,t.jsx)(h.E,{className:"h-64 w-full rounded-lg"}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)(h.E,{className:"h-8 w-16"}),(0,t.jsx)(h.E,{className:"h-8 w-16"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.E,{className:"h-6 w-20"}),(0,t.jsxs)("div",{className:"flex -space-x-1",children:[(0,t.jsx)(h.E,{className:"h-6 w-6 rounded-full"}),(0,t.jsx)(h.E,{className:"h-6 w-6 rounded-full"}),(0,t.jsx)(h.E,{className:"h-6 w-6 rounded-full"})]})]})]})]})}function f({community:e,sortBy:s="createdAt",sortType:a="desc",search:h,minQualityScore:f,authentic:p=!0}){let[j,g]=(0,l.useState)(1),[v,N]=(0,l.useState)([]),[b,w]=(0,l.useState)(!0),[y,C]=(0,l.useState)(!1),[k,A]=(0,l.useState)(!1),{ref:E,inView:F}=(0,r.Wx)({threshold:0,rootMargin:"100px"}),{data:S,isLoading:$,isFetching:z,error:L,refetch:P}=(0,i.aC)({cursor:j.toString(),limit:10,community:e,sortBy:s,sortType:a,search:h,minQualityScore:f,authentic:p}),R=(0,l.useMemo)(()=>{if(!S)return[];let e=S?.docs;if(Array.isArray(e))return e;let s=S?.data;return Array.isArray(s)?s:[]},[S]);(0,l.useMemo)(()=>{if("boolean"==typeof S?.hasNextPage)return S.hasNextPage;let e=S?.meta,s=e?.pagination??e;if(s){if("boolean"==typeof s.hasNextPage)return s.hasNextPage;if("boolean"==typeof s.hasNext)return s.hasNext}return"number"==typeof S?.nextPage||R.length>0},[S,R]);let I=(0,l.useCallback)(()=>{g(1),N([]),w(!0),P(),A(!1)},[P]),M=(0,l.useCallback)(()=>{g(1),N([]),w(!0),C(!1),P(),window.scrollTo({top:0,behavior:"smooth"}),A(!1)},[P]);if(($||z)&&1===j&&0===v.length)return(0,t.jsxs)(u.Zp,{className:"p-8 text-center",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Loading feed"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Feed posts will load shortly."})]});if(L&&0===v.length)return(0,t.jsxs)(u.Zp,{className:"p-8 text-center",children:[(0,t.jsx)(c.A,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Failed to load posts"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Something went wrong while loading the feed. Please try again."}),(0,t.jsxs)(m.$,{onClick:I,variant:"outline",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Try Again"]})]});let Z=0===v.length&&0===R.length;return $||z||!Z?(0,t.jsxs)("div",{className:"space-y-6",children:[y&&(0,t.jsx)("div",{className:"sticky top-4 z-10 flex justify-center",children:(0,t.jsxs)(m.$,{onClick:M,className:"shadow-lg",size:"sm",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Load New Posts"]})}),v.map(e=>(0,t.jsx)(n.R,{post:e},e._id)),(0,t.jsx)("div",{ref:E,className:"h-10",children:z&&b&&(0,t.jsx)("div",{className:"space-y-6",children:Array.from({length:3}).map((e,s)=>(0,t.jsx)(x,{},`loading-${s}`))})}),!b&&v.length>0&&(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("div",{className:"h-px bg-border flex-1 max-w-20"}),(0,t.jsx)("span",{className:"text-sm",children:"You've reached the end"}),(0,t.jsx)("div",{className:"h-px bg-border flex-1 max-w-20"})]})}),L&&v.length>0&&(0,t.jsxs)(u.Zp,{className:"p-4 text-center",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Failed to load more posts"}),(0,t.jsxs)(m.$,{onClick:I,variant:"outline",size:"sm",children:[(0,t.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Retry"]})]})]}):(0,t.jsx)(u.Zp,{className:"p-8 text-center",children:(0,t.jsxs)("div",{className:"text-muted-foreground",children:[(0,t.jsx)(o.A,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No posts found"}),(0,t.jsx)("p",{children:h?`No posts found matching "${h}"`:e?"This community doesn't have any posts yet":"No posts available at the moment"})]})})}},35084:(e,s,a)=>{a.d(s,{FeedFilters:()=>A});var t=a(60687),l=a(43210),r=a(16189),n=a(48730),i=a(25541),o=a(99270),c=a(11860),d=a(80462),m=a(29523),u=a(89667),h=a(40599),x=a(4780);let f=h.bL,p=h.l9,j=l.forwardRef(({className:e,align:s="center",sideOffset:a=4,...l},r)=>(0,t.jsx)(h.ZL,{children:(0,t.jsx)(h.UC,{ref:r,align:s,sideOffset:a,className:(0,x.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...l})}));j.displayName=h.UC.displayName;var g=a(96834),v=a(24851);let N=l.forwardRef(({className:e,...s},a)=>(0,t.jsxs)(v.bL,{ref:a,className:(0,x.cn)("relative flex w-full touch-none select-none items-center",e),...s,children:[(0,t.jsx)(v.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(v.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(v.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));N.displayName=v.bL.displayName;var b=a(90270);let w=l.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b.bL,{className:(0,x.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:a,children:(0,t.jsx)(b.zi,{className:(0,x.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));w.displayName=b.bL.displayName;var y=a(80013),C=a(44493),k=a(50926);function A({currentCommunity:e,currentPlatform:s,currentSortBy:a="createdAt",currentSortType:h="desc",currentSearch:x,currentMinQualityScore:v,currentAuthentic:b=!0,communitySlug:A=""}){let E=(0,r.useRouter)(),F=(0,r.useSearchParams)(),{data:S}=(0,k.lY)(A);console.log(S);let[$,z]=(0,l.useState)(x||""),[L,P]=(0,l.useState)([v||0]),[R,I]=(0,l.useState)(b),[M,Z]=(0,l.useState)(!1),Q=[{value:"createdAt",label:"Latest",icon:n.A},{value:"totalEngagement",label:"Most Popular",icon:i.A}],T=s=>{let a=new URLSearchParams(F);Object.entries(s).forEach(([e,s])=>{s&&""!==s?a.set(e,s):a.delete(e)});let t=e?`/feed/${e}`:"/";E.push(`${t}?${a.toString()}`)},O=e=>{T({sortBy:e,sortType:"desc"})},J=[s,x,"createdAt"!==a,v&&v>0,!b].filter(Boolean).length;return(0,t.jsxs)(C.Zp,{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),T({search:$})},className:"flex w-full",children:(0,t.jsxs)("div",{className:"flex w-full gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(u.p,{placeholder:"Search posts...",value:$,onChange:e=>z(e.target.value),className:"pl-10 pr-10 w-full"}),$&&(0,t.jsx)(m.$,{type:"button",variant:"ghost",size:"sm",onClick:()=>{z(""),T({search:void 0})},className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",children:(0,t.jsx)(c.A,{className:"h-3 w-3"})})]}),(0,t.jsx)(m.$,{type:"submit",className:"bg-primary flex-shrink-0 h-full",size:"sm",children:"Search"})]})}),(0,t.jsxs)(f,{open:M,onOpenChange:Z,children:[(0,t.jsx)(p,{asChild:!0,children:(0,t.jsxs)(m.$,{variant:"outline",className:"relative",children:[(0,t.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Filters",J>0&&(0,t.jsx)(g.E,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs flex items-center justify-center",children:J})]})}),(0,t.jsx)(j,{className:"w-80",align:"end",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Advanced Filters"}),(0,t.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>{z(""),P([0]),I(!0);let s=e?`/feed/${e}`:"/";E.push(s)},children:"Clear All"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(y.J,{children:["Minimum Quality Score: ",L[0],"%"]}),(0,t.jsx)(N,{value:L,onValueChange:P,max:100,step:10,className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(y.J,{htmlFor:"authentic",children:"Authentic Content Only"}),(0,t.jsx)(w,{id:"authentic",checked:R,onCheckedChange:I})]}),(0,t.jsx)(m.$,{onClick:()=>{T({minQualityScore:L[0]>0?L[0].toString():void 0,authentic:R?"true":"false"}),Z(!1)},className:"w-full",children:"Apply Filters"})]})})]})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:Q.map(e=>{let s=e.icon,l=a===e.value;return(0,t.jsxs)(m.$,{variant:l?"default":"outline",size:"sm",onClick:()=>O(e.value),className:"flex items-center space-x-2",children:[(0,t.jsx)(s,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.label})]},e.value)})}),J>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[x&&(0,t.jsxs)(g.E,{variant:"secondary",className:"flex items-center gap-1",children:['Search: "',x,'"',(0,t.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>{z(""),T({search:void 0})},className:"h-4 w-4 p-0 ml-1",children:(0,t.jsx)(c.A,{className:"h-3 w-3"})})]}),s&&(0,t.jsxs)(g.E,{variant:"secondary",className:"flex items-center gap-1",children:["Platform:"," ",[{value:"reddit",label:"Reddit"},{value:"twitter",label:"Twitter"},{value:"linkedin",label:"LinkedIn"},{value:"medium",label:"Medium"}].find(e=>e.value===s)?.label,(0,t.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>T({platform:void 0}),className:"h-4 w-4 p-0 ml-1",children:(0,t.jsx)(c.A,{className:"h-3 w-3"})})]}),v&&v>0&&(0,t.jsxs)(g.E,{variant:"secondary",className:"flex items-center gap-1",children:["Quality: ",v,"%+",(0,t.jsx)(m.$,{variant:"ghost",size:"sm",onClick:()=>T({minQualityScore:void 0}),className:"h-4 w-4 p-0 ml-1",children:(0,t.jsx)(c.A,{className:"h-3 w-3"})})]})]})]})}},40918:(e,s,a)=>{a.d(s,{InfiniteFeed:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call InfiniteFeed() from the server but InfiniteFeed is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\components\\feed\\infinite-feed.tsx","InfiniteFeed")},45933:(e,s,a)=>{a.d(s,{FeedFilters:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call FeedFilters() from the server but FeedFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"G:\\shishir vai\\EarnCoreCommunity\\client\\src\\components\\feed\\feed-filters.tsx","FeedFilters")},80013:(e,s,a)=>{a.d(s,{J:()=>n});var t=a(60687);a(43210);var l=a(78148),r=a(4780);function n({className:e,...s}){return(0,t.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},96834:(e,s,a)=>{a.d(s,{E:()=>i});var t=a(60687);a(43210);var l=a(24224),r=a(4780);let n=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...a}){return(0,t.jsx)("div",{className:(0,r.cn)(n({variant:s}),e),...a})}}};